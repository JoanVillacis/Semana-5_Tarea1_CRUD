
using _02_CRUD.Config;
using _02_CRUD.Modelos;

namespace _02_CRUD.Controladores
{
    public class Rol_Controller
    {
        public readonly sqlServer_dbcontext _Rol_Dbcontext = new sqlServer_dbcontext();

        public List<Rol_Model> todos()
        {
            var list = new List<Rol_Model>();
            list = _Rol_Dbcontext.Roles.ToList();
            return list;
        }

        public Rol_Model uno(int id)
        {
            return _Rol_Dbcontext.Roles.FirstOrDefault(r => r.Id_Rol == id);
        }

        public string insetar(Rol_Model Rol_Model)
        {
            if (Rol_Model == null)
            {
                return "Debe completar la caja de texto para guardar al rol";
            }
            else
            {
                _Rol_Dbcontext.Add(Rol_Model);
                _Rol_Dbcontext.SaveChanges();
                return "ok";
            }
        }

        public string editar(Rol_Model Rol_Model)
        {
            if (Rol_Model == null)
            {
                return "Debe completar la caja de texto para guardar al rol";
            }
            else
            {
                var rol_existente = _Rol_Dbcontext.Roles.FirstOrDefault(r => r.Id_Rol == Rol_Model.Id_Rol);

                rol_existente.Nombre_Rol = Rol_Model.Nombre_Rol;

                _Rol_Dbcontext.SaveChanges();
                return "ok";
            }
        }

        public string eliminar(int id)
        {
            if (id != 0)
            {
                _Rol_Dbcontext.Remove(id);
                _Rol_Dbcontext.SaveChanges();
                return "ok";
            }
            else
            {
                return "Seleccione un rol para eliminar";
            }
        }
    }
}
